{#
 * @copyright 2024 City of Bloomington, Indiana
 * @license http://www.gnu.org/licenses/agpl.txt GNU/AGPL, see LICENSE
 * @param array  service             Open311 Service information array
 * @param string google_maps_api_key
 * @param float  default_latitude
 * @param float  default_longitude
#}
{% extends "html/layouts/default.twig" %}

{% block content %}
<section id="requestForm">
    <header>
        <h2>{{ service.group        }}</h2>
        <h3>{{ service.service_name }}</h3>
         <p>{{ service.description  }}</p>
    </header>

    <form method="post" enctype="multipart/form-data">
        <fieldset>
            <legend>Service request location:</legend>
            <div id="map_container">
                <div id="map"></div>
                <div id="crosshairs"></div>
            </div>
            <input name="address_string" id="address_string" value="" />
            <input name="lat"            id="lat"            type="hidden" value="" />
            <input name="long"           id="long"           type="hidden" value="" />
        </fieldset>
        <fieldset>
            <legend>General information:</legend>
            <div>
                <label  for="media">Include Image:</label>
                <input name="media" id="media" type="file" accept="image/*" />
            </div>
            <div>
                <label for="description">Describe this issue:</label>
                <textarea name="description" id="description"></textarea>
            </div>
        </fieldset>
        <fieldset>
            <legend>Your Information</legend>
            <p>By leaving the fields below empty, <strong>you may submit anonymously</strong>.</p>
            <p><strong>Note:</strong> <i>Information you provide through uReport is stored and retained by the City as a public record.</i></p>

            <div>
                <label  for="firstname">First Name:</label>
                <input name="firstname" id="firstname" placeholder="First Name" />
            </div>
            <div>
                <label for="lastname">Last Name:</label>
                <input name="lastname" id="lastname" placeholder="Last Name" />
            </div>
            <div>
                <label for="phone">Phone:</label>
                <input name="phone" id="phone" type="tel" />
            </div>
            <div>
                <label for="email">Email:</label>
                <input name="email" id="email" type="email" />
            </div>
        </fieldset>
        <fieldset>
            <button type="submit">Submit</button>
        </fieldset>
    </form>

</section>
<script>
    const DEFAULT_LATITUDE  = {{ default_latitude }},
          DEFAULT_LONGITUDE = {{ default_longitude }};
</script>
<script async src="https://maps.googleapis.com/maps/api/js?libraries=maps,places&key={{ google_maps_api_key }}&v=weekly&callback=initMap"></script>
<script src="{{ BASE_URI }}/js/map.js"></script>
<script src="{{ BASE_URI }}/js/form.js"></script>

{% endblock %}
