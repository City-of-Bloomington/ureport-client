{#
 * @copyright 2024 City of Bloomington, Indiana
 * @license http://www.gnu.org/licenses/agpl.txt GNU/AGPL, see LICENSE
 * @param array groups
 * @param array searchResults
#}
{% extends "html/layouts/default.twig" %}

{% block content %}
<section class="container">
    <header>
        <h1>Select a Request Category</h1>
        <div class="alert alert-info">
            <p class="alert-heading lead">Non-Emergency Use Only</p>
            <p>This system is not for reporting emergencies or imminent safety hazards.</p>
            <p>If this is an emergency, please dial 911.</p>

            <p class="alert-heading lead">Public Record</p>
            <p>Information you provide through uReport is stored and retained by the City as a public record.</p>
        </div>
    </header>
    <form>
        <fieldset>
            <legend>Search for services</legend>
            <input name="query" id="query" />
            <div id="searchResults" class="list-group">
            {% if searchResults %}{{ include('html/partials/searchResults.twig') }}{% endif %}
            </div>
        </fieldset>
    </form>
    <div class="row row-cols-1 row-cols-md-2 g-3 justify-content-center">
    {% for code, group in groups %}
        <details class="col">
            <summary class="p-3 btn btn-primary vstack align-items-center">
                <img src="{{ 'https://bloomington.in.gov/static/ureport-client/' ~ code ~ '.svg' }}" role="img" aria-hidden="true" class="mb-2" style="width:20%;">
                <h2>{{ group.name }}</h2>
            </summary>
            <div class="list-group">
            {% for s in group.services %}
                <a href="{{ uri('home.contact', {'service_code':s.service_code, 'group_code':code}) }}"
                   class="list-group-item list-group-item-action">
                    <h3>{{ s.service_name }}</h3>
                    <p>{{ s.description }}</p>
                </a>
            {% endfor %}
            </div>
        </details>
    {% endfor %}
    </div>
</section>
<script src="{{ BASE_URI }}/js/search-{{ VERSION }}.js"></script>
{% endblock %}
